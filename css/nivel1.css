/* ===================== VARIABLES Y BASE ===================== */
:root{
  --bg: #0d0d0d;
  --text: #fff;
  --accent: #ff4d6d;
  --accent-dim: #ff1f4d;
  --panel-bg:#1a1a1a;
  --card-bg:#2a2a2a;
  --drop-bg:#1b1b1b;
  --ws-bg:#121212;
  --edge:#666;
  --edge-2:#444;
  --block-border:#555;
  --blue:#00bfff;
  --loop-border:#ffcc00;
  --loop-bg:#332b00;

  /* Tablero */
  --planet-d: 56px;   /* diámetro del planeta */
  --ship-d:   22px;   /* diámetro de la nave */
  --orbit-gap: 10px;  /* separación mínima planeta/nave */
  --orbit-pref-d: 80%;/* diámetro ideal de la órbita respecto al tablero */
}

*{box-sizing:border-box}

body{
  margin:0; padding:0;
  background:var(--bg); color:var(--text);
  font-family:"Orbitron",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}

h1,h2{
  text-align:center;
  color:var(--accent);
  text-shadow:0 0 8px var(--accent);
  max-width:1100px; margin:16px auto; padding:0 16px;
}

/* ====== Header / Instrucciones (look Brain Rot, sin cambiar HTML) ====== */
.topbar{
  padding: 18px 16px 14px;
  background:
    radial-gradient(1200px 220px at 50% -40%, rgba(255,77,109,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,77,109,.06), transparent 60%);
  border-bottom: 1px solid var(--edge-2);
}
.topbar h1{
  margin: 0 0 6px;
  font-weight: 800;
  line-height: 1.15;
  letter-spacing: .2px;
  text-shadow: 0 0 10px rgba(255,77,109,.35);
}
.topbar p{
  margin: 0 auto;
  max-width: 960px;
  color: #cfd2d6;
  line-height: 1.5;
  text-wrap: balance;
  font-size: 0.975rem;
}
.topbar p strong{
  display: inline-block;
  margin: 0 .12rem .18rem;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(255,77,109,.10);
  border: 1px solid rgba(255,77,109,.45);
  color: #fff;
  font-weight: 800;
  letter-spacing: .15px;
}
#targetX{
  display: inline-block;
  padding: 0 6px;
  margin-left: 2px;
  border-radius: 6px;
  background: #141419;
  border: 1px dashed rgba(255,77,109,.55);
  font-variant-numeric: tabular-nums;
  box-shadow: inset 0 0 0 1px rgba(255,77,109,.12);
}
.topbar p em{
  color: var(--accent);
  font-style: normal;
  text-shadow: 0 0 6px rgba(255,77,109,.25);
}
@media (max-width: 720px){
  .topbar h1{ font-size: 1.12rem; }
  .topbar p{ font-size: .95rem; }
  .topbar p strong{ padding: 1px 7px; }
}

/* ===================== CONTENEDOR + LAYOUT ===================== */
.container{ max-width:1100px; margin:0 auto; padding:16px; }
.layout{ display:grid; grid-template-columns:1fr; gap:20px; }

@media (min-width:1100px){
  .layout{
    grid-template-columns:300px minmax(0,1fr) 380px;
    grid-template-areas:"panel workspace game";
    align-items:start;
  }
  .panel{grid-area:panel}
  .workspace{grid-area:workspace}
  .game{grid-area:game}
}

@media (min-width:700px) and (max-width:1099px){
  .layout{
    grid-template-columns:280px minmax(0,1fr);
    grid-template-areas:
      "panel workspace"
      "panel game";
  }
  .panel{grid-area:panel}
  .workspace{grid-area:workspace}
  .game{grid-area:game}
}

.panel,.workspace,.game{min-width:0}

/* ===================== PANEL DE BLOQUES ===================== */
#blocks-panel{
  display:flex; flex-wrap:wrap; gap:8px;
  padding:12px; border-radius:8px;
  background:var(--panel-bg);
  border-bottom:2px solid var(--accent);
}

/* Bloques base (inventario / fuera del programa) */
.block{
  display:inline-block;
  padding:8px 12px; margin:5px;
  background:var(--card-bg); color:var(--text);
  border:2px solid var(--block-border); border-radius:6px;
  box-shadow:0 2px 4px rgba(0,0,0,.3);
  cursor:grab; user-select:none;
  transition:transform .15s ease, border-color .15s ease;
}
.block:hover{ transform:scale(1.05); border-color:var(--accent); }

/* ===================== WORKSPACE / PROGRAMA ===================== */
#workspace{
  min-height:420px; padding:16px;
  background:var(--ws-bg);
  border:2px dashed var(--edge); border-radius:10px;
}

.dropzone{
  min-height:50px; padding:10px; margin:8px 0;
  border:2px dashed #777; border-radius:6px;
  background:var(--drop-bg);
}
.dropzone.over{ border-color:var(--accent); box-shadow:0 0 6px var(--accent); }
@media (max-width:480px){ .dropzone{ min-height:64px; padding:12px; } }

/* -------- Apariencia dentro del Programa (refuerzo para clones) -------- */
#workspace .block,
#workspace .dropzone .block,
#workspace [data-type],
#workspace .placed,
#workspace .simple{
  border:2px solid var(--blue) !important;
  border-radius:8px !important;
  background:#1a1a2e !important;
  padding:10px 14px !important;
  margin:6px 0 !important;
  color:var(--text) !important;
  font-weight:bold !important;
  box-shadow:0 2px 6px rgba(0,0,0,.4) !important;
}
#workspace .block:hover,
#workspace [data-type]:hover{
  border-color:var(--accent) !important;
  transform:scale(1.04);
  transition:transform .15s ease, border-color .15s ease;
}

/* ===================== BLOQUE SIMPLE (compacto) ===================== */
#workspace .block.simple{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:6px 10px !important; font-size:.9rem;
}

/* Botón borrar genérico + variantes */
.block .btn-remove{
  background:transparent; border:none;
  color:var(--accent); font-size:1rem; line-height:1;
  cursor:pointer; padding:0; transition:transform .15s ease, color .15s;
}
.block .btn-remove:hover{ transform:scale(1.2); color:var(--accent-dim); }

/* ===================== LOOP (contenedor) ===================== */
#workspace [data-type="loop"],
#workspace .block.loop,
#workspace .placed.loop{
  position:relative;
  display:grid; grid-template-rows:auto 1fr; row-gap:6px;
  padding:8px 12px 10px 12px !important;
  border:2px solid var(--loop-border) !important;
  background:var(--loop-bg) !important;
  border-radius:8px !important;
  color:var(--text); font-weight:700; font-size:.95rem;
}

/* Botón borrar flotante para loop (no empuja contenido) */
#workspace .block.loop .btn-remove{
  position:absolute; top:6px; right:6px;
  background:#221a00; color:var(--loop-border);
  border:1px solid var(--loop-border); border-radius:6px;
  padding:2px 6px; font-size:.85rem; line-height:1;
}
#workspace .block.loop .btn-remove:hover{ filter:brightness(1.2); }

/* Cabecera del loop y número */
#workspace .block.loop .loop-head{ display:flex; align-items:center; gap:8px; }
#workspace .block.loop .loop-n{
  display:inline-block; margin:0 6px; padding:2px 6px;
  border:1px solid var(--loop-border); border-radius:6px;
  background:#3b2a00; font-weight:800;
}

/* Dropzone interna del loop (apilable) */
#workspace .block.loop .dropzone{
  display:block; width:100%;
  min-height:56px; margin-top:2px; padding:8px;
  border:2px dashed #777; border-radius:6px;
  background:#1a1a1a;
}

/* ===================== TABLERO (rota .orbiter) ===================== */
.board{
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1;
  max-height: 80vh;
  border: 2px solid var(--edge-2);
  border-radius: 8px;
  background: #0e0e16;
  overflow: hidden;
}
.game h2{ margin-top:.25rem; }
@media (max-width:699px){ .board{ max-height:none; } }

/* Planeta centrado */
.board .planet{
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  width: var(--planet-d); height: var(--planet-d);
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #ffd36b, #ff9b2f 55%, #b55a1a 80%);
  box-shadow: 0 0 18px rgba(255,211,107,.5), inset 0 0 8px #7c3e12;
}

/* Órbita (círculo) y contenedor que rota (.orbiter) */
.board .orbit,
.board .orbiter{
  position: absolute; left: 50%; top: 50%;
  width:  clamp(
            calc(var(--planet-d) + (var(--ship-d) * 2) + (var(--orbit-gap) * 2)),
            var(--orbit-pref-d),
            90%
          );
  height: clamp(
            calc(var(--planet-d) + (var(--ship-d) * 2) + (var(--orbit-gap) * 2)),
            var(--orbit-pref-d),
            90%
          );
  transform: translate(-50%, -50%);
  transform-origin: 50% 50%;
  border-radius: 50%;
}
.board .orbit{
  border: 2px dashed #555;
  opacity: .95;
}
/* .orbiter: SIN borde; lo rota el JS con transform: rotate(...) */
.board .orbiter{}

/* La nave va pegada al borde derecho del círculo que rota */
.board .ship{
  position: absolute; top: 50%; right: 0;
  transform: translateY(-50%);
  width: var(--ship-d); height: var(--ship-d);
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #9dd6ff, #2a8cff 70%);
  border: 2px solid #bfe1ff;
  box-shadow: 0 0 12px rgba(157,214,255,.55);
}

/* Leyenda bajo tablero */
.legend{
  margin-top: 8px;
  color: #a7abb3;
  text-align: center;
  font-size: .95rem;
}

/* ===== Botonera de herramientas ===== */
.tools {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
}
.tools button {
  font-size: 1.05rem;
  padding: 10px 16px;
  min-height: 42px;
  border-radius: 10px;
  border: 1px solid #333;
  background: linear-gradient(#2a2a2a, #222);
  color: #fff;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,.35);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.tools button:hover { transform: translateY(-1px); box-shadow: 0 4px 10px rgba(0,0,0,.45); }
.tools button:active { transform: translateY(0); box-shadow: 0 1px 4px rgba(0,0,0,.3); }

#btn-run {
  border-color: #1f8f3a;
  background: linear-gradient(#27ae60, #1e874b);
  font-weight: 700;
}
#btn-run[disabled] {
  filter: grayscale(0.6) brightness(0.85);
  cursor: not-allowed;
}

/* Slider un poco más grande */
.tools .speed input[type="range"] { height: 6px; }
.tools .speed { display: flex; align-items: center; gap: 8px; font-size: .95rem; }
