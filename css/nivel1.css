/* ===================== VARIABLES Y BASE ===================== */
:root{
  --bg: #0d0d0d;
  --text: #fff;
  --accent: #ff4d6d;
  --accent-dim: #ff1f4d;
  --panel-bg:#1a1a1a;
  --card-bg:#2a2a2a;
  --drop-bg:#1b1b1b;
  --ws-bg:#121212;
  --edge:#666;
  --edge-2:#444;
  --block-border:#555;
  --blue:#00bfff;
  --loop-border:#ffcc00;
  --loop-bg:#332b00;
}

*{box-sizing:border-box}

body{
  margin:0; padding:0;
  background:var(--bg); color:var(--text);
  font-family:"Orbitron",sans-serif;
}

h1,h2{
  text-align:center;
  color:var(--accent);
  text-shadow:0 0 8px var(--accent);
  max-width:1100px; margin:16px auto; padding:0 16px;
}

/* ===================== CONTENEDOR + LAYOUT ===================== */
.container{ max-width:1100px; margin:0 auto; padding:16px; }
.layout{ display:grid; grid-template-columns:1fr; gap:20px; }

@media (min-width:1100px){
  .layout{
    grid-template-columns:300px minmax(0,1fr) 380px;
    grid-template-areas:"panel workspace game";
    align-items:start;
  }
  .panel{grid-area:panel}
  .workspace{grid-area:workspace}
  .game{grid-area:game}
}

@media (min-width:700px) and (max-width:1099px){
  .layout{
    grid-template-columns:280px minmax(0,1fr);
    grid-template-areas:
      "panel workspace"
      "panel game";
  }
  .panel{grid-area:panel}
  .workspace{grid-area:workspace}
  .game{grid-area:game}
}

.panel,.workspace,.game{min-width:0}

/* ===================== PANEL DE BLOQUES ===================== */
#blocks-panel{
  display:flex; flex-wrap:wrap; gap:8px;
  padding:12px; border-radius:8px;
  background:var(--panel-bg);
  border-bottom:2px solid var(--accent);
}

/* Bloques base (inventario / fuera del programa) */
.block{
  display:inline-block;
  padding:8px 12px; margin:5px;
  background:var(--card-bg); color:var(--text);
  border:2px solid var(--block-border); border-radius:6px;
  box-shadow:0 2px 4px rgba(0,0,0,.3);
  cursor:grab; user-select:none;
  transition:transform .15s ease, border-color .15s ease;
}
.block:hover{ transform:scale(1.05); border-color:var(--accent); }

/* ===================== WORKSPACE / PROGRAMA ===================== */
#workspace{
  min-height:420px; padding:16px;
  background:var(--ws-bg);
  border:2px dashed var(--edge); border-radius:10px;
}

.dropzone{
  min-height:50px; padding:10px; margin:8px 0;
  border:2px dashed #777; border-radius:6px;
  background:var(--drop-bg);
}
.dropzone.over{ border-color:var(--accent); box-shadow:0 0 6px var(--accent); }
@media (max-width:480px){ .dropzone{ min-height:64px; padding:12px; } }

/* -------- Apariencia dentro del Programa (refuerzo para clones) -------- */
#workspace .block,
#workspace .dropzone .block,
#workspace [data-type],
#workspace .placed,
#workspace .simple{
  border:2px solid var(--blue) !important;
  border-radius:8px !important;
  background:#1a1a2e !important;
  padding:10px 14px !important;
  margin:6px 0 !important;
  color:var(--text) !important;
  font-weight:bold !important;
  box-shadow:0 2px 6px rgba(0,0,0,.4) !important;
}
#workspace .block:hover,
#workspace [data-type]:hover{
  border-color:var(--accent) !important;
  transform:scale(1.04);
  transition:transform .15s ease, border-color .15s ease;
}

/* ===================== BLOQUE SIMPLE (compacto) ===================== */
#workspace .block.simple{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:6px 10px !important; font-size:.9rem;
}

/* Botón borrar genérico + variantes */
.block .btn-remove{
  background:transparent; border:none;
  color:var(--accent); font-size:1rem; line-height:1;
  cursor:pointer; padding:0; transition:transform .15s ease, color .15s;
}
.block .btn-remove:hover{ transform:scale(1.2); color:var(--accent-dim); }

/* ===================== LOOP (contenedor) ===================== */
#workspace [data-type="loop"],
#workspace .block.loop,
#workspace .placed.loop{
  position:relative;
  display:grid; grid-template-rows:auto 1fr; row-gap:6px;
  padding:8px 12px 10px 12px !important;
  border:2px solid var(--loop-border) !important;
  background:var(--loop-bg) !important;
  border-radius:8px !important;
  color:var(--text); font-weight:700; font-size:.95rem;
}

/* Botón borrar flotante para loop (no empuja contenido) */
#workspace .block.loop .btn-remove{
  position:absolute; top:6px; right:6px;
  background:#221a00; color:var(--loop-border);
  border:1px solid var(--loop-border); border-radius:6px;
  padding:2px 6px; font-size:.85rem; line-height:1;
}
#workspace .block.loop .btn-remove:hover{ filter:brightness(1.2); }

/* Cabecera del loop y número */
#workspace .block.loop .loop-head{ display:flex; align-items:center; gap:8px; }
#workspace .block.loop .loop-n{
  display:inline-block; margin:0 6px; padding:2px 6px;
  border:1px solid var(--loop-border); border-radius:6px;
  background:#3b2a00; font-weight:800;
}

/* Dropzone interna del loop (apilable) */
#workspace .block.loop .dropzone{
  display:block; width:100%;
  min-height:56px; margin-top:2px; padding:8px;
  border:2px dashed #777; border-radius:6px;
  background:#1a1a1a;
}

/* ===================== TABLERO ===================== */
.board{
  width:100%; aspect-ratio:1/1; max-height:80vh;
  border:2px solid var(--edge-2); border-radius:8px;
  background:#0e0e16; overflow:hidden;
}
.game h2{ margin-top:.25rem; }
@media (max-width:699px){ .board{ max-height:none; } }
