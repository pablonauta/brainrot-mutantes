/* =========================================================
   NIVEL 3 — Satélites de Gatitos (CSS standalone)
   ========================================================= */
:root{
  --bg:#0c0d0f; --text:#e9edf3; --muted:#a5adba;
  --panel:#17181b; --panel-2:#1f2024; --border:#2c3037;
  --accent:#ff4d6d; --accent-2:#ffd166;
  --rail-border:#3a3f47; --loop-border:#5a4f2a;
  --radius-lg:12px; --radius-md:10px; --radius-sm:8px;
  --shadow-1:0 6px 18px rgba(0,0,0,.25);
  --shadow-2:0 10px 28px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}

/* Topbar */
.topbar{padding:16px 20px;background:var(--panel);border-bottom:1px solid var(--border);box-shadow:var(--shadow-1)}
.topbar h1{margin:0 0 6px;font-size:24px;letter-spacing:.2px;font-weight:800}
.muted{color:var(--muted)} .small{font-size:.92rem}

/* Layout 3 columnas */
.layout{
  max-width:1280px;margin:0 auto;padding:16px;
  display:grid;gap:20px;grid-template-columns:320px 1fr 380px;
}
.panel{
  background:var(--panel);border:1px solid var(--border);
  border-radius:var(--radius-lg);padding:12px;box-shadow:var(--shadow-1)
}
.panel h2{margin:.25rem 0 .6rem;font-size:18px;font-weight:700}

/* Panel izquierdo: bloques (fuente de DnD) */
#blocks-panel .block{
  display:flex;align-items:center;justify-content:space-between;
  height:44px;padding:8px 10px;margin-bottom:8px;
  border-radius:var(--radius-md);border:1px solid var(--border);
  background:var(--panel-2);cursor:grab;user-select:none;-webkit-user-drag:element;
}
#blocks-panel .block .label{font-weight:700;letter-spacing:.2px;-webkit-user-drag:none}
#blocks-panel .block.loop .label{color:var(--accent-2)}
#blocks-panel .block.simple.sync .label{color:#7dd3fc}
#blocks-panel .block.simple.beam .label{color:#fca5a5}
#blocks-panel .block.disabled{opacity:.35;filter:grayscale(80%);cursor:not-allowed}
#blocks-panel hr{border:0;height:1px;background:var(--border);margin:10px 0}
.stock p{margin:.25rem 0}
#speed{
  width:100%;margin-top:6px;padding:6px 8px;border-radius:var(--radius-sm);
  border:1px solid var(--border);background:var(--panel-2);color:var(--text)
}

/* Workspace (centro) */
.workspace{
  min-height:320px;padding:12px;border:1px dashed var(--border);
  border-radius:var(--radius-lg);background:rgba(255,255,255,.02);
}

/* Rieles para acciones sueltas */
.root-rail{
  min-height:48px;padding:6px;margin:8px 0;border:1px dashed var(--rail-border);
  border-radius:var(--radius-md);background:rgba(255,255,255,.015)
}
.rail-hint{color:var(--muted);font-size:.92rem}

/* Bloques colocados en el workspace */
.block.placed{
  background:var(--panel-2);border:1px solid var(--border);border-radius:var(--radius-md);
  padding:8px 10px;margin:8px 0;display:flex;align-items:center;justify-content:space-between;
}
.btn-mini{background:transparent;border:0;color:var(--muted);cursor:pointer;font-size:16px;padding:2px 6px}
.btn-mini:hover{color:var(--text)}

/* Loop */
.block.loop{flex-direction:column;align-items:stretch}
.block.loop .loop-head{display:flex;gap:6px;align-items:center;font-weight:800;color:var(--accent-2)}
/* dropzone genérica y de loop */
.dropzone{
  min-height:48px;border:1px dashed var(--loop-border);border-radius:var(--radius-md);
  margin:8px 0;padding:8px;background:rgba(255,209,102,.07)
}
.dropzone.is-hover{outline:2px solid var(--accent);outline-offset:2px}

/* Tipos de acción (colores) */
.block.simple.sync .label{color:#7dd3fc}
.block.simple.beam .label{color:#fca5a5}

/* Botonera */
.actions{display:flex;gap:8px;margin-top:12px}
.btn{
  background:var(--panel-2);color:var(--text);border:1px solid var(--border);
  border-radius:var(--radius-md);padding:8px 12px;cursor:pointer
}
.btn:hover{border-color:#4b4f57}
.btn-primary{background:var(--accent);border-color:transparent}
.btn-primary:disabled{opacity:.6;cursor:not-allowed}

/* Panel derecho: tablero */
.board{
  position:relative;min-height:300px;border:1px solid var(--border);border-radius:var(--radius-lg);
  padding:10px;background:linear-gradient(180deg,#111218,#0b0b0f);overflow:hidden;
}
.sky{
  position:absolute;inset:0;pointer-events:none;
  background:
    radial-gradient(2px 2px at 20% 30%,#fff8,transparent 60%),
    radial-gradient(2px 2px at 70% 60%,#fff6,transparent 60%),
    radial-gradient(1.5px 1.5px at 40% 80%,#fff5,transparent 60%);
  filter:blur(.4px);
}
.constellation{position:relative;height:100%;display:flex;flex-direction:column;justify-content:space-between}
.sats{display:flex;align-items:center;justify-content:center;gap:60px;margin-top:18px}
.sat{font-size:32px;transition:transform .18s ease}
.synced{transform:translateY(-3px)}
.wave{position:absolute;width:2px;height:2px;border-radius:999px;background:#fff;opacity:0}
.wave.beam{animation:beam 600ms ease-out;opacity:1}
@keyframes beam{0%{transform:scale(1);opacity:.9}100%{transform:scale(60);opacity:0}}
.timeline{height:6px;background:#1c1e23;border-radius:6px;border:1px solid #2a2d33;margin:18px 10px}
.timeline .progress{height:100%;width:0%;background:linear-gradient(90deg,#60a5fa,#34d399);border-radius:6px;transition:width .2s ease}

/* Toast */
.toast{
  position:fixed;left:50%;top:20px;transform:translateX(-50%);
  background:#20222a;color:#fff;border:1px solid #3a3d44;padding:10px 14px;border-radius:10px;
  box-shadow:var(--shadow-2);opacity:0;transition:opacity .2s,transform .2s;z-index:9999;
}
.toast.is-visible{opacity:1;transform:translateX(-50%) translateY(6px)}
.toast--success{background:#13281a;border-color:#245c36}

/* Accesibilidad táctil/seguridad DnD */
#blocks-panel, #workspace, .board{pointer-events:auto}

/* Responsive */
@media (max-width:1100px){
  .layout{grid-template-columns:300px 1fr}
  .panel--right{grid-column:1 / -1}
}
@media (max-width:760px){
  .layout{grid-template-columns:1fr}
  .panel{padding:10px}
  .sats{gap:36px}
}
