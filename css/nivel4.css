/**************************************************************
 * NIVEL 4 — Purga Brain Rot (CSS)
 **************************************************************/

/* =========================
   1) Variables y resets
   ========================= */
:root{
  --bg:#0e0e10;
  --panel:#17181a;
  --panel-2:#1f2023;
  --text:#ffffff;
  --muted:#a7abb3;
  --border:#3a3d44;

  --accent:#ff4d6d;
  --accent-loop:#ffcc00;
  --ok:#22c55e;
  --seal:#c026d3;

  --hint:#8a8f98;
  --shadow:0 2px 6px rgba(0,0,0,.35);

  --radius:10px;
  --pad:12px;
  --gap:12px;

  --font:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:var(--font);line-height:1.35;
}

/* =========================
   2) Cabecera y contenedor
   ========================= */
.topbar{
  padding:18px 16px;text-align:center;border-bottom:1px solid var(--border);
  background:linear-gradient(180deg, rgba(255,77,109,.06), transparent 60%);
}
.topbar h1{
  margin:0 0 8px;color:var(--accent);text-shadow:0 0 8px rgba(255,77,109,.4);font-weight:800;
}
.topbar p{margin:0;color:var(--muted)}

.container{max-width:1160px;margin:0 auto;padding:16px}

/* Layout */
.layout{display:grid;grid-template-columns:1fr;gap:16px}
@media (min-width:1100px){
  .layout{
    grid-template-columns:310px minmax(0,1fr) 420px;
    grid-template-areas:"panel workspace game";
    gap:20px;
  }
  .panel{grid-area:panel}
  .workspace{grid-area:workspace}
  .game{grid-area:game}
}

/* =========================
   3) Panel lateral
   ========================= */
.panel h2{margin:0 0 8px;font-weight:800}

.inventory{
  background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);
  padding:10px;margin-bottom:10px;
}
.inv-line{display:flex;justify-content:space-between;align-items:center;padding:6px 0;font-size:.95rem}
.inv-label{color:var(--muted)}
.inv-badge{
  background:#16200a;border:1px solid #b2f25f;color:#d9ff83;
  padding:2px 8px;border-radius:8px;font-weight:700;
}

#blocks-panel{
  background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);
  padding:var(--pad);display:flex;flex-wrap:wrap;gap:var(--gap);margin-bottom:12px;
}

/* Bloque base */
.block{
  background:var(--panel-2);border:2px solid var(--border);border-radius:10px;
  padding:8px 12px;box-shadow:var(--shadow);cursor:grab;user-select:none;
  transition:transform .12s ease,border-color .12s ease,box-shadow .12s ease;
}
.block:hover{transform:translateY(-1px);border-color:var(--accent);box-shadow:0 3px 10px rgba(0,0,0,.45)}
.block.antirot{border-color:var(--ok);background:rgba(34,197,94,.08)}
.block.seal{border-color:var(--seal);background:rgba(192,38,211,.08)}
.block.loop{border-color:var(--accent-loop);background:rgba(255,204,0,.08)}

.loop-head{display:flex;align-items:center;gap:8px;font-weight:700}

/* Dropzone interna del loop (más grande para acertar) */
.block.loop .dropzone{
  margin-top:8px;min-height:88px;padding:12px;
  background:#121316;border:2px dashed #5a5f69;border-radius:8px;
}

/* Estado deshabilitado en inventario */
.disabled{opacity:.45;filter:grayscale(.2);pointer-events:none}

/* =========================
   4) Herramientas
   ========================= */
.tools{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-top:10px}
.tools button{
  background:var(--panel);color:var(--text);border:1px solid var(--border);border-radius:8px;
  padding:6px 10px;cursor:pointer;
}
.tools button:hover{border-color:var(--accent)}
.speed{margin-left:auto;color:var(--hint);font-size:.95rem}
.speed input{vertical-align:middle}

/* =========================
   5) Programa (workspace) — USABILIDAD
   ========================= */
.workspace h2{margin:0 0 8px;font-weight:800}
#workspace{
  min-height:500px;         /* más alto = más fácil acertar */
  padding:18px;
  background:#111216;
  border:3px dashed #5a5f69;
  border-radius:12px;
  overflow:auto;            /* autoscroll mientras arrastrás */
  scroll-behavior:smooth;
}
#workspace.is-hover{
  outline:2px dashed var(--accent);
  outline-offset:4px;
}

/* Dropzones genéricas */
.dropzone{
  min-height:44px;padding:8px;border:1px dashed var(--border);border-radius:10px;
  margin:8px 0 6px;transition:outline 120ms ease;
}
.dropzone.is-hover{outline:2px solid var(--accent)}

/* Plan */
.plan{margin-top:10px;color:var(--hint);display:grid;gap:4px}

/* =========================
   6) Board (grilla 3×4)
   ========================= */
.game h2{margin:0 0 8px;font-weight:800}
.board{
  position:relative;width:100%;aspect-ratio:1 / 1;max-height:72vh;
  background:radial-gradient(ellipse at center,#0a0a14 20%,#0b0b10 60%,#0a0a0a 100%);
  border:1px solid var(--border);border-radius:12px;display:grid;place-items:center;overflow:hidden;
}
.board .grid{
  display:grid;
  grid-template-columns:repeat(4,minmax(46px,1fr)); /* 4 columnas */
  grid-auto-rows:64px;gap:10px;width:92%;max-width:520px;margin:0 auto;
}
.cell{
  display:grid;place-items:center;border:1px solid var(--border);border-radius:12px;
  background:#17181a;transition:transform 120ms ease, background 120ms ease, box-shadow 120ms ease;
}
.cell .icon{font-size:22px}
.cell.synced{background:rgba(0,120,255,.12);box-shadow:0 0 0 2px rgba(0,120,255,.18) inset}
.cell.beamed{background:rgba(255,170,0,.14);box-shadow:0 0 0 2px rgba(255,170,0,.22) inset}
.cell.focused{background:rgba(255,213,74,.16);box-shadow:0 0 0 2px rgba(255,213,74,.26) inset}

.legend{margin-top:8px;color:var(--hint);text-align:center;font-size:.95rem}

/* =========================
   7) Toast
   ========================= */
.toast{
  position:fixed;left:50%;bottom:24px;transform:translate(-50%,16px);
  opacity:0;background:#1b1c20;border:1px solid var(--border);color:var(--text);
  padding:8px 12px;border-radius:10px;transition:.22s ease;box-shadow:var(--shadow);z-index:999;
}
.toast--success{border-color:var(--ok)}
.toast.is-visible{opacity:1;transform:translate(-50%,0)}

/* =========================
   8) Extras
   ========================= */
.foot{border-top:1px solid var(--border);color:var(--hint);text-align:center;padding:14px 10px 26px;margin-top:6px}

/* Evitar que el loop “tape” la dropzone al arrastrar encima */
.block.loop{position:relative;padding-bottom:8px}
.block.loop .dropzone{position:relative;z-index:1}

/* Estilos para FOCO (por si no los tenías) */
.block.simple.focus{
  border-color:#ffd54a;background:rgba(255,213,74,.08);
  box-shadow:0 0 0 1px rgba(255,213,74,.18) inset;
}
